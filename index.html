<script>
  function sendToChatbot(chatSessionId, userMessage) {
    fetch("http://10.10.55.151:5000/chatbot", {  // Send message to your laptop
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_session_id: chatSessionId, message: userMessage })
    })
    .then(response => response.json())
    .then(data => {
      if (data.response) {
        // Display the bot's response in the chat widget
        ZammadChat.addMessage({ message: data.response, sender: 'Agent' });
      }
    });
  }

  document.addEventListener("DOMContentLoaded", function() {
    ZammadChat.on("message", function(message) {
      sendToChatbot(message.chat_session_id, message.text);
    });
  });
</script>
